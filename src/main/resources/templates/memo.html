<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="layout/layout_main">
<th:block layout:fragment="title">TOMO | 메모</th:block>
<th:block layout:fragment="css"><link rel="stylesheet" href="css/memo.css"></th:block>
<section ng-app="MyApp" ng-controller="memoController" layout:fragment="content" class="container_main">
    <nav class="nav">
        네비
    </nav>
    <div class="main">
        <div class="container_context" id="memo_parent">
            <article ng-repeat="memo in memos | orderBy:['!-fix', '-dateOfCreate'] | filter:{ state: 0}" class="memo" id="memo_{{memo.id}}">
                <i ng-click="setPin(false, memo)" ng-show="memo.fix=='1'" class="fas fa-thumbtack fix"></i>
                <i ng-click="setPin(true, memo)" ng-show="memo.fix=='0'" class="fas fa-thumbtack"></i>
                <div  class="container_memo" ng-click="editMemo(memo.id)">
                    <div class="bar_memo">
                        <div ng-show="config.editMode && config.editTarget==memo.id">
                            <span>
                                <i ng-click="removeMemo(memo)" class="far fa-trash-alt"></i>
                                <i ng-click="updateMemo(memo)" class="fas fa-check"></i>
                            </span>
                            <span style="padding-left: 10px;padding-right: 10px;color: darkseagreen;">|</span>
                            <span class="memo_menu_items">
                                <i ng-click="setBoldText(memo)" class="fas fa-bold"></i>
                                <i class="fas fa-strikethrough"></i>
                                <i class="fas fa-underline"></i>
                            </span>
                        </div>
                    </div>
                    <div ng-bind-html="memo.context" ng-show="!config.editMode || config.editTarget!=memo.id" class="memo_content textarea">
                        {{memo.context}}
                    </div>
                    <div ng-mouseup="highlightText()" ng-bind-html="memo.context" id="memo_context_{{memo.id}}" ng-show="config.editMode && config.editTarget==memo.id" class="memo_content textarea" contenteditable="true">
                        {{memo.context}}
                    </div>
                </div>
                <div ng-show="config.editMode && config.editTarget!=memo.id" style="position:absolute; z-index: 10; width: 302px; height: 372px; background-color: rgba(0,0,0,0.05);top:0;left:0;"></div>
            </article>
        </div>
    </div>
    <div class="button_add_memo" ng-click="addMemo()">
        <i class="fas fa-edit" style="font-size: 20px;color: rgba(0,0,0,0.5); margin:0 auto;text-align: center;"></i>
    </div>
</section>
